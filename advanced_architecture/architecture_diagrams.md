# ğŸ—ï¸ **Architecture Diagrams (Text-Based)**

## **Model 1: fine_tune.py (Original LoRA)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    INPUT LAYER                              â”‚
â”‚              Text + Audio + Video                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    TEXT     â”‚    â”‚   AUDIO     â”‚    â”‚   VIDEO     â”‚
â”‚ BERT + LoRA â”‚    â”‚ Mean Pool   â”‚    â”‚ Mean Pool   â”‚
â”‚   (r=8)     â”‚    â”‚  [T,74]â†’74  â”‚    â”‚  [T,10]â†’10  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚
       â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Text Project â”‚    â”‚Audio Projectâ”‚    â”‚Video Projectâ”‚
â”‚  768 â†’ 512  â”‚    â”‚  74 â†’ 512   â”‚    â”‚  10 â†’ 512   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚  SIMPLE FUSION      â”‚
                â”‚ Concatenate         â”‚
                â”‚ [512,512,512]â†’1536  â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚    MLP LAYERS       â”‚
                â”‚   1536â†’512â†’1        â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚   PHQ-8 OUTPUT      â”‚
                â”‚    MSE LOSS         â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Key Features:**
- âœ… Parameter efficient (LoRA)
- âœ… Simple architecture
- âŒ No temporal modeling
- âŒ Basic fusion

---

## **Model 2: fine_tune_v1.py (Improved LoRA)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    INPUT LAYER                              â”‚
â”‚              Text + Audio + Video                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    TEXT     â”‚    â”‚   AUDIO     â”‚    â”‚   VIDEO     â”‚
â”‚ BERT + LoRA â”‚    â”‚ Mean Pool   â”‚    â”‚ Mean Pool   â”‚
â”‚   (r=8)     â”‚    â”‚  [T,74]â†’74  â”‚    â”‚  [T,10]â†’10  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚
       â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Text+LayerNormâ”‚    â”‚Audio+LayerN â”‚    â”‚Video+LayerN â”‚
â”‚  768 â†’ 512  â”‚    â”‚  74 â†’ 512   â”‚    â”‚  10 â†’ 512   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ ENHANCED FUSION     â”‚
                â”‚ Concat + LayerNorm  â”‚
                â”‚ [512,512,512]â†’1536  â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ ENHANCED MLP        â”‚
                â”‚ 1536â†’512â†’1          â”‚
                â”‚ + LayerNorm + Drop  â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚   PHQ-8 OUTPUT      â”‚
                â”‚   RMSE LOSS         â”‚
                â”‚ + Early Stopping    â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Key Improvements:**
- âœ… Layer normalization
- âœ… RMSE loss
- âœ… Early stopping
- âœ… Better regularization
- âŒ Still no temporal modeling

---

## **Model 3: configurable_multimodal.py (Advanced)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    INPUT LAYER                              â”‚
â”‚        Text + Audio Sequence + Video Sequence              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    TEXT     â”‚    â”‚   AUDIO     â”‚    â”‚   VIDEO     â”‚
â”‚ DistilBERT  â”‚    â”‚Temporal CNN â”‚    â”‚Temporal CNN â”‚
â”‚ (Full Model)â”‚    â”‚[100,74]â†’512 â”‚    â”‚[100,10]â†’512 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚
       â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Text Project â”‚    â”‚Audio Projectâ”‚    â”‚Video Projectâ”‚
â”‚  768 â†’ 512  â”‚    â”‚  512 â†’ 512  â”‚    â”‚  512 â†’ 512  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚    CROSS-MODAL ATTENTION        â”‚
            â”‚                                 â”‚
            â”‚  Text â†â†’ Audio â†â†’ Video         â”‚
            â”‚       (6 Layers)                â”‚
            â”‚                                 â”‚
            â”‚ â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”      â”‚
            â”‚ â”‚ Tâ†’A â”‚  â”‚ Aâ†’V â”‚  â”‚ Vâ†’T â”‚      â”‚
            â”‚ â”‚ Tâ†’V â”‚  â”‚ Aâ†’T â”‚  â”‚ Vâ†’A â”‚      â”‚
            â”‚ â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜      â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚      DYNAMIC FUSION             â”‚
            â”‚                                 â”‚
            â”‚ Learnable Weights:              â”‚
            â”‚ wâ‚Ã—Text + wâ‚‚Ã—Audio + wâ‚ƒÃ—Video   â”‚
            â”‚ Softmax(wâ‚, wâ‚‚, wâ‚ƒ)             â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚REGRESSION   â”‚    â”‚CLASSIFICATIONâ”‚    â”‚CONTRASTIVE  â”‚
â”‚HEAD         â”‚    â”‚HEAD          â”‚    â”‚HEAD         â”‚
â”‚             â”‚    â”‚              â”‚    â”‚             â”‚
â”‚PHQ-8 Score  â”‚    â”‚Emotion Class â”‚    â”‚Embedding    â”‚
â”‚MSE Loss     â”‚    â”‚CE Loss       â”‚    â”‚InfoNCE Loss â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚   MULTI-TASK LOSS   â”‚
                â”‚                     â”‚
                â”‚ Î»â‚Ã—MSE + Î»â‚‚Ã—CE +    â”‚
                â”‚ Î»â‚ƒÃ—Contrastive      â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Advanced Features:**
- âœ… Temporal CNN processing
- âœ… Cross-modal attention
- âœ… Dynamic fusion
- âœ… Multi-task learning
- âœ… Contrastive learning
- âœ… State-of-the-art techniques

---

## **ğŸ“Š Data Flow Comparison**

### **Input Data Processing:**

| **Modality** | **fine_tune.py** | **fine_tune_v1.py** | **configurable** |
|--------------|------------------|---------------------|------------------|
| **Text** | `Transcript â†’ BERT+LoRA â†’ [768]` | `Transcript â†’ BERT+LoRA+LN â†’ [768]` | `Transcript â†’ DistilBERT â†’ [768]` |
| **Audio** | `[T,74] â†’ Mean() â†’ [74]` | `[T,74] â†’ Mean()+LN â†’ [74]` | `[100,74] â†’ TCN â†’ [512]` |
| **Video** | `[T,10] â†’ Mean() â†’ [10]` | `[T,10] â†’ Mean()+LN â†’ [10]` | `[100,10] â†’ TCN â†’ [512]` |

### **Fusion Processing:**

```
Model 1: [768] + [74] + [10] â†’ Project â†’ [512] + [512] + [512] â†’ Concat â†’ [1536] â†’ MLP â†’ [1]

Model 2: [768] + [74] + [10] â†’ Project+LN â†’ [512] + [512] + [512] â†’ Enhanced â†’ [1536] â†’ Enhanced MLP â†’ [1]

Model 3: [768] + [512] + [512] â†’ Project â†’ [512] + [512] + [512] â†’ Cross-Attention â†’ Dynamic Fusion â†’ Multi-Head â†’ [1,2,128]
```

---

## **ğŸ¯ Performance Complexity Matrix**

```
                 Performance Potential
                         â–²
                    5 â”¤   â”‚   â—„â”€â”€ configurable_multimodal.py
                      â”‚   â”‚
                    4 â”¤   â”‚
                      â”‚   â”‚ â—„â”€â”€ fine_tune_v1.py
                    3 â”¤   â”‚
                      â”‚   â”‚
                    2 â”¤   â”‚ â—„â”€â”€ fine_tune.py
                      â”‚   â”‚
                    1 â”¤   â”‚
                      â””â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â–º Implementation Complexity
                          1   2   3   4   5

Legend:
â€¢ fine_tune.py: Low complexity, baseline performance
â€¢ fine_tune_v1.py: Medium complexity, improved performance  
â€¢ configurable_multimodal.py: High complexity, best performance
```

---

## **ğŸ”„ Training Pipeline Comparison**

### **Model 1: fine_tune.py**
```
Data â†’ LoRA Fine-tuning â†’ MSE Loss â†’ AdamW â†’ Save Model
       â†‘                    â†‘
   Parameter Efficient   Simple Loss
```

### **Model 2: fine_tune_v1.py**  
```
Data â†’ LoRA Fine-tuning â†’ RMSE Loss â†’ AdamW â†’ Early Stop â†’ Save Best
       â†‘                    â†‘                     â†‘
   Parameter Efficient   Better Loss      Regularization
```

### **Model 3: configurable_multimodal.py**
```
Data â†’ Multi-Modal Processing â†’ Multi-Task Loss â†’ AdamW+Scheduler â†’ Save Best
       â†‘                           â†‘                      â†‘
   Temporal+Attention        MSE+CE+Contrastive    Advanced Training
                                    â†“
                            Contrastive Learning
                                    â†“
                            Better Representations
```

This comprehensive comparison shows how each model builds upon the previous one, adding complexity and sophistication to achieve better performance on the emotion detection task.
